<style>
body {
background-image:url('heart.png') ;
}

ul li{
    display: inline;
}
</style>
<div style="margin-left: 23%;margin-right: 90%;margin-top: 5%;
width:50%; padding:10px; font-size: 40px;
font-style:sans-serif; 
color:lightcoral;border-color : salmon;background-color: whitesmoke;">
ハート♡ポーズの練習をしよう！</div>
<div style="margin-left:35%;margin-right: 60%;
width: 27%;font-size: 20px;
color:lightsalmon;background-color: whitesmoke;">
***三種類のどれか確認しよう***</div>
<img src="指ハート.jpg" width="140" height="220"
style="margin-left: 8% ;"></img>
<img src="ピースハート.jpg" width="300" height="140"
style="margin-left: 16% ;"></img>
<img src="ノーマルハート.jpg" width="220" height="140"
style="margin-left: 16% ;"></img>
<ul style="color: cornsilk;background-color: crimson;">
    <li style="margin-left: 7%;">指ハート</li>
    <li style="margin-left: 30%">ピースハート</li>
    <li style="margin-left: 28%;">ノーマルハート</li>
</ul>
<div style="margin-left: 38%;margin-right: 40%;margin-top: 3%;">
<button style="width:100%; padding:15px;font-size: 60px;
font-style:fantasy;
color:lightcoral ;border-color : salmon;background-color: whitesmoke;"
class="rounded-corner" type="button" onclick="init()">Start</button></div>
<div id="label-container"
style="margin-left: 43%;vertical-align: 100px;color: cornsilk;"></div>
<div id="webcam-container"
style="margin-left: 32%;margin-bottom: 50%;"></div>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
<script type="text/javascript">
    // More API functions here:
    // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

    // the link to your model provided by Teachable Machine export panel
    const URL = "https://teachablemachine.withgoogle.com/models/qLuVHhK4o/";

    let model, webcam, labelContainer, maxPredictions;

    // Load the image model and setup the webcam
    async function init() {
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";

        // load the model and metadata
        // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
        // or files from your local hard drive
        // Note: the pose library adds "tmImage" object to your window (window.tmImage)
        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();

        // Convenience function to setup a webcam
        const flip = true; // whether to flip the webcam
        webcam = new tmImage.Webcam(400, 400, flip); // width, height, flip
        await webcam.setup(); // request access to the webcam
        await webcam.play();
        window.requestAnimationFrame(loop);

        // append elements to the DOM
        document.getElementById("webcam-container").appendChild(webcam.canvas);
        labelContainer = document.getElementById("label-container");
        for (let i = 0; i < maxPredictions; i++) { // and class labels
            labelContainer.appendChild(document.createElement("div"));
        }
    }

    async function loop() {
        webcam.update(); // update the webcam frame
        await predict();
        window.requestAnimationFrame(loop);
    }

    // run the webcam image through the image model
    async function predict() {
        // predict can take in an image, video or canvas html element
        const prediction = await model.predict(webcam.canvas);
        for (let i = 0; i < maxPredictions; i++) {
            const classPrediction =
                prediction[i].className + ": " + prediction[i].probability.toFixed(2);
            labelContainer.childNodes[i].innerHTML = classPrediction;
        }
    }
</script>
